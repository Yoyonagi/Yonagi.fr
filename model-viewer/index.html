<!DOCTYPE html>
<html lang="fr">
<head>
    <style>
        /* Anti-flash blanc */
        body {
            background-color: #1e1e2f;
            color: #ffffff;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
            visibility: hidden; /* ← temporairement caché */
        }
    </style>
    <title>Visualiseur 3D - Yonagi</title>

    <!-- Head commun (favicon, CSS globale, meta tags, FontAwesome...) -->
    <script>
        fetch("/components/head-meta.html")
            .then(res => res.text())
            .then(data => document.head.innerHTML += data);
    </script>

    <!-- Script spécifique à cette page -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>

    <!-- Style spécifique à cette page -->
    <style>
        .viewer-container {
            max-width: 1400px;
            margin: 40px auto;
        }

        model-viewer {
            width: 100%;
            height: 800px;
            border-radius: 12px;
            box-shadow: 0 0 20px #0008;
        }

        .viewer-title {
            margin-top: 40px;
            color: #ff6ec7;
            text-align: center;
        }

        .back-link {
            margin-top: 30px;
            display: inline-block;
            color: #ff6ec7;
            text-decoration: none;
            font-weight: bold;
        }

            .back-link:hover {
                text-decoration: underline;
            }

        .model-switcher {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
        }

            .model-switcher button {
                background-color: #ff6ec7;
                color: #fff;
                border: none;
                padding: 10px 15px;
                border-radius: 8px;
                font-weight: bold;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }

                .model-switcher button:hover {
                    background-color: #e25cae;
                }
    </style>
</head>


<body class="with-sidebar">
    <!-- Sidebar de navigation -->
    <div id="sidebar"></div>
    <script>
        fetch("/components/sidebar.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("sidebar").innerHTML = data;
            });
    </script>

    <div id="preloader"><p>Chargement des vibes...</p></div>
    <div id="sidebar" class="sidebar" style="display: none;"></div>

    <!-- Contenu principal -->
    <div class="container">
        <h1 class="viewer-title">Visualisation 3D : Technivibe</h1>

        <!-- Le viewer 3D -->
        <div class="viewer-container">
            <model-viewer id="viewer"
                          alt="Modèle 3D Technivibe"
                          src="Technivibe.glb"
                          ar
                          auto-rotate
                          camera-controls
                          touch-action="pan-y"
                          shadow-intensity="1"
                          exposure="1"
                          poster=""></model-viewer>
        </div>

        <!-- Boutons pour changer de modèle -->
        <div class="model-switcher">
            <button onclick="loadModel('Technivibe.glb', 'Technivibe')">Technivibe</button>
            <button onclick="loadModel('Injection.glb', 'Injection')">Injection</button>
            <button onclick="loadModel('Moule-projet.glb', 'Moule')">Moule projet</button>
            <button onclick="loadModel('Machine-a-cookies.glb', 'Cookies')">Machine à cookies</button>
        </div>

        <!-- Lien retour à l'accueil -->
        <p style="text-align: center;">
            <a class="back-link" href="/">⬅ Retour à l'accueil</a>
        </p>
    </div>

    <!-- Script pour changer de modèle dynamiquement -->
    <script>
        function loadModel(file, title) {
            const viewer = document.getElementById('viewer');
            const heading = document.querySelector('.viewer-title');

            viewer.setAttribute('src', file);
            heading.textContent = `Visualisation 3D : ${title}`;
        }
    </script>
    <script src="/scripts/sidebar-loader.js"></script>
    <div id="footer" style="display: none;"></div>
    <script src="/scripts/footer-loader.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const toggleBtn = document.getElementById("toggleSidebar");
            if (toggleBtn) {
                toggleBtn.addEventListener("click", () => {
                    document.body.classList.toggle("sidebar-expanded");
                });
            }
        });
    </script>
    <script>
        window.addEventListener("load", () => {
            document.body.style.visibility = "visible";
        });
    </script>
</body>
</html>
